<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maison connectée</title>
    <link rel="stylesheet" type="text/css" href="/css/home.css" th:href="@{/css/home.css}">

</head>

<body>
<div class="overlay"></div>

<header>
    <a href="/home.html" class="logo">
        <span class="logo-icon"></span>
        <span></span>
    </a>

    <div class="auth-buttons">
        <a href="/login?show=login" class="link">Se connecter</a>
        <a href="/login?show=register" class="link">S'inscrire</a>
    </div>
</header>

<main>
    <section class="hero">
        <h1>Votre maison. Plus intelligente. Plus simple. Plus sûre.</h1>
        <p>Contrôlez, surveillez et automatisez votre maison depuis n'importe où. Découvrez une nouvelle façon de vivre avec DomotiQue.</p>

        <button class="scroll-button" onclick="scrollToFreeTour()">Découvrir le Free Tour <span class="scroll-icon">↓</span></button>
    </section>

    <!-- Section Free Tour -->
    <section class="free-tour" id="free-tour">
        <h2>Free Tour - Découvrez votre maison connectée</h2>

        <div class="step-indicator">
            <div class="step-dot active" data-step="1"></div>
            <div class="step-dot" data-step="2"></div>
            <div class="step-dot" data-step="3"></div>
        </div>

        <div class="carousel-container">
            <!-- Étape 1: Entrée -->
            <div class="carousel-slide active" data-slide="1">
                <h3>Entrée Intelligente</h3>
                <p>La caméra de reconnaissance faciale sécurise votre entrée et vous permet d'ouvrir la porte sans les clés.</p>

                <div class="interactive-area" id="entrance-scene">
                    <div class="scene-container entrance-scene"></div>
                    <div class="interaction-buttons">
                        <button class="interaction-button" id="activate-camera">Activer la caméra</button>
                        <button class="interaction-button" id="recognize-face" disabled>Reconnaissance faciale</button>
                    </div>
                </div>
            </div>

            <!-- Étape 2: Salon -->
            <div class="carousel-slide" data-slide="2">
                <h3>Salon Connecté</h3>
                <p>Contrôlez l'ambiance de votre salon avec un système intelligent de lumière et de musique.</p>

                <div class="interactive-area" id="living-room-scene">
                    <div class="scene-container living-room-scene"></div>
                    <div class="interaction-buttons">
                        <button class="interaction-button" id="toggle-lights">Allumer les lumières</button>
                        <button class="interaction-button" id="play-music">Lancer la musique</button>
                    </div>
                </div>
            </div>

            <!-- Étape 3: Sécurité -->
            <div class="carousel-slide" data-slide="3">
                <h3>Sécurité Avancée</h3>
                <p>Système d'alarme intelligent avec notifications instantanées sur votre smartphone.</p>

                <div class="interactive-area" id="security-scene">
                    <div class="scene-container security-scene"></div>
                    <div class="interaction-buttons">
                        <button class="interaction-button" id="activate-alarm">Activer l'alarme</button>
                        <button class="interaction-button" id="send-notification" disabled>Tester notification</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="carousel-buttons">
            <button class="nav-button" id="prev-button" disabled>Étape précédente</button>
            <p class="step-counter">Étape <span id="current-step">1</span>/3</p>
            <button class="nav-button" id="next-button">Étape suivante</button>
        </div>
    </section>

<script>
    function scrollToFeatures() {
        // Faire défiler jusqu'à la section des fonctionnalités
        document.getElementById('features').scrollIntoView({
            behavior: 'smooth'
        });
    }

    function scrollToFreeTour() {
        // Faire défiler jusqu'à la section Free Tour
        document.getElementById('free-tour').scrollIntoView({
            behavior: 'smooth'
        });
    }

    // Carousel du Free Tour
    document.addEventListener('DOMContentLoaded', function() {
        let currentSlide = 1;
        const totalSlides = 3;

        const nextButton = document.getElementById('next-button');
        const prevButton = document.getElementById('prev-button');
        const stepCounter = document.getElementById('current-step');
        const allSlides = document.querySelectorAll('.carousel-slide');
        const allDots = document.querySelectorAll('.step-dot');

        // Fonction pour changer de slide
        function goToSlide(slideNumber) {
            // Masquer tous les slides
            allSlides.forEach(slide => {
                slide.classList.remove('active');
            });

            // Afficher le slide actif
            document.querySelector(`.carousel-slide[data-slide="${slideNumber}"]`).classList.add('active');

            // Mettre à jour les dots
            allDots.forEach(dot => {
                dot.classList.remove('active');
            });
            document.querySelector(`.step-dot[data-step="${slideNumber}"]`).classList.add('active');

            // Mettre à jour le compteur
            stepCounter.textContent = slideNumber;

            // Activer/désactiver les boutons
            prevButton.disabled = slideNumber === 1;
            nextButton.disabled = slideNumber === totalSlides;

            // Réinitialiser les interactions pour le slide actuel
            resetInteractions(slideNumber);

            currentSlide = slideNumber;
        }

        // Fonctions de navigation
        nextButton.addEventListener('click', function() {
            if (currentSlide < totalSlides) {
                goToSlide(currentSlide + 1);
            }
        });

        prevButton.addEventListener('click', function() {
            if (currentSlide > 1) {
                goToSlide(currentSlide - 1);
            }
        });

        // Navigation par les dots
        allDots.forEach(dot => {
            dot.addEventListener('click', function() {
                const slideNumber = parseInt(this.getAttribute('data-step'));
                goToSlide(slideNumber);
            });
        });

        // Interactions de l'entrée
        const entranceScene = document.getElementById('entrance-scene');
        const activateCameraBtn = document.getElementById('activate-camera');
        const recognizeFaceBtn = document.getElementById('recognize-face');

        activateCameraBtn.addEventListener('click', function() {
            entranceScene.classList.add('camera-active');
            this.textContent = 'Caméra activée';
            this.disabled = true;
            recognizeFaceBtn.disabled = false;
        });

        recognizeFaceBtn.addEventListener('click', function() {
            entranceScene.classList.add('face-recognized');
            entranceScene.classList.add('door-open');
            this.textContent = 'Accès autorisé';
            this.disabled = true;
        });

        // Interactions du salon
        const livingRoomScene = document.getElementById('living-room-scene');
        const toggleLightsBtn = document.getElementById('toggle-lights');
        const playMusicBtn = document.getElementById('play-music');

        toggleLightsBtn.addEventListener('click', function() {
            if (livingRoomScene.classList.contains('lights-on')) {
                livingRoomScene.classList.remove('lights-on');
                this.textContent = 'Allumer les lumières';
            } else {
                livingRoomScene.classList.add('lights-on');
                this.textContent = 'Éteindre les lumières';
            }
        });

        playMusicBtn.addEventListener('click', function() {
            if (livingRoomScene.classList.contains('music-playing')) {
                livingRoomScene.classList.remove('music-playing');
                this.textContent = 'Lancer la musique';
            } else {
                livingRoomScene.classList.add('music-playing');
                this.textContent = 'Arrêter la musique';
            }
        });

        // Interactions de la sécurité
        const securityScene = document.getElementById('security-scene');
        const activateAlarmBtn = document.getElementById('activate-alarm');
        const sendNotificationBtn = document.getElementById('send-notification');

        activateAlarmBtn.addEventListener('click', function() {
            securityScene.classList.add('alarm-on');
            this.textContent = 'Alarme activée';
            this.disabled = true;
            sendNotificationBtn.disabled = false;
        });

        sendNotificationBtn.addEventListener('click', function() {
            securityScene.classList.add('notification-sent');
            this.textContent = 'Notification envoyée';
            this.disabled = true;
        });

        // Réinitialiser les interactions lors du changement de slide
        function resetInteractions(slideNumber) {
            switch(slideNumber) {
                case 1:
                    entranceScene.classList.remove('camera-active', 'face-recognized', 'door-open');
                    activateCameraBtn.textContent = 'Activer la caméra';
                    activateCameraBtn.disabled = false;
                    recognizeFaceBtn.textContent = 'Reconnaissance faciale';
                    recognizeFaceBtn.disabled = true;
                    break;

                case 2:
                    livingRoomScene.classList.remove('lights-on', 'music-playing');
                    toggleLightsBtn.textContent = 'Allumer les lumières';
                    playMusicBtn.textContent = 'Lancer la musique';
                    break;

                case 3:
                    securityScene.classList.remove('alarm-on', 'notification-sent');
                    activateAlarmBtn.textContent = "Activer l'alarme";
                    activateAlarmBtn.disabled = false;
                    sendNotificationBtn.textContent = 'Tester notification';
                    sendNotificationBtn.disabled = true;
                    break;
            }
        }
    });
</script>

</body>
</html>