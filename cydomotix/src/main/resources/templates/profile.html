<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mon profil</title>
</head>

<body>
    <h2>Mon Profil</h2>

    <!-- Afficher la photo de profil. -->
    <img th:src="@{${user.photo}}" alt="Profile Picture" width="100px" height="100px"><br>

    <a th:href="@{/{username}(username=${user.username})}">Voir mon profil public</a><br>

    <!-- Champs à modifier -->
    <form th:action="@{/profile/update}" method="post" enctype="multipart/form-data" th:object="${user}">
        <table>
            <tr>
                <td><label for="username">Pseudonyme :</label></td>
                <td><input type="text" id="username" th:field="*{username}"></td>
            </tr>
            <tr>
                <td><label for="gender">Genre :</label></td>
                <td>
                    <select th:field="*{gender}" id="gender">
                        <option th:each="gender : ${T(com.example.cydomotix.Model.Users.Gender).values()}" th:value="${gender}" th:text="${gender.displayName}"></option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label for="password">Nouveau mot de passe :</label></td>
                <td><input type="password" minlength="6" id="password" name="password"></td>
            </tr>
            <tr>
                <td><label for="oldPswd">Confirmez l'ancien mot de passe :</label></td>
                <td><input type="password" id="oldPswd" name="oldPswd"></td>
            </tr>
            <tr>
                <td><label for="birthDate">Date de naissance :</label></td>
                <td><input type="date" id="birthDate" name="birthDate" th:value="*{birthDate}"></td>
            </tr>
            <tr>
                <td><label for="firstName">Prénom :</label></td>
                <td><input type="text" id="firstName" th:field="*{firstName}"></td>
            </tr>
            <tr>
                <td><label for="lastName">Nom :</label></td>
                <td><input type="text" id="lastName" th:field="*{lastName}"></td>
            </tr>
            <tr>
                <td><label for="pfp">Image de profil :</label></td>
                <td><input type="file" name="pfp" id="pfp" accept="image/*"></td>
            </tr>
        </table>

        <button type="submit">Enregistrer</button>
        <br>


        <!-- Affichage de l'erreur -->
        <div th:if="${errorMessage}" style="color: red; font-weight: bold;">
            <p th:text="${errorMessage}"></p>
        </div>

        <!-- Affichage du message de succès -->
        <div th:if="${successMessage}" style="color: green; font-weight: bold;">
            <p th:text="${successMessage}"></p>
        </div>

    </form>

</body>
</html>